<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Twittler</title>
    <link rel="stylesheet" type="text/css" href="main.css">
    <script src="jquery.js"></script>
    <script src="data_generator.js"></script>
  </head>

  <body>
        
    <header>Clark's Twittler</header>

    <button class="bigButton">Load Twittles</button>

    <main class="tweet-container">tweet container</main>
  
    <footer>A HackReactor Project</footer>

    <script>

// ORIGINAL FUNCTION 
/*
      $(document).ready(function(){
          var $body = $('body');
          $body.html('');
          var index = streams.home.length - 1;
          while(index >= 0){
            var tweet = streams.home[index];
            var $tweet = $('<div></div>');
            $tweet.text('@' + tweet.user + ': ' + tweet.message);
            $tweet.appendTo($body);
            index -= 1;
          }
        }); */

      $(document).ready(function(){

        var tweetStream = function(user){
  
          $('main').html('');

          if (user === undefined) {
            var index = streams.home.length - 1;
          } else {
            var index = streams.users[user].length - 1;
          }

          while(index >= 0) {
            if (user === undefined) {
             var tweet = streams.home[index];
            } else {
             var tweet = streams.users[user][index];              
            }

            var $tweet = $('<div class="single-tweet">' + '<button class="username"' + 'id="' + tweet.user + '">@' + tweet.user + '</button>: ' + tweet.message + '  ' + tweet.created_at + '</div>');
            $tweet.appendTo('main');
            index -= 1;
          }
        };

    //  Button click to load all tweets 
        $('.bigButton').on('click', function() {
          
          $('.bigButton').text('Load New Twittles');

          tweetStream();
        }); 

    //  Button click to see a single user's tweets
       $('main').on('click', '.username', function() {
          
          $(this).closest('.bigButton').text('Back to Home');

          var user = $(this).attr('id');
          tweetStream(user);
        }); 

      }); // << closes the document.ready function

    </script> 
    
  </body>
</html>
